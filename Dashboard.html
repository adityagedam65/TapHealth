<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>TapHealth Dashboard</title>
  <script src="https://cdn.jsdelivr.net/npm/qrcodejs/qrcode.min.js"></script>
  <style>
    * {
      box-sizing: border-box;
      font-family: Inter, Arial, sans-serif;
    }

    body {
      margin: 0;
      background: #f6f7fb;
    }

    .app {
      display: flex;
      height: 100vh;
    }

    /* SIDEBAR */
    .sidebar {
      width: 240px;
      background: #fff;
      border-right: 1px solid #eaeaea;
      padding: 20px;
      display: flex;
      flex-direction: column;
    }

    .logo {
      font-weight: 700;
      margin-bottom: 30px;
    }

    .sidebar nav a {
      display: block;
      padding: 12px;
      border-radius: 10px;
      margin-bottom: 8px;
      color: #555;
      cursor: pointer;
      text-decoration: none;
    }

    .sidebar nav .active {
      background: #5b4cf0;
      color: #fff;
    }

    .sidebar{
    display:flex;
    flex-direction:column;
    height:100vh;
}

    .bottom{
        margin-top:auto;
        display:flex;
        flex-direction:column;
        gap:10px;
        padding:15px;
    }

    .bottom a{
        display:block;
        width:100%;
        text-decoration:none;
    }

    .emergency{
        background:#fee2e2;
        color:#dc2626;
        padding:10px 14px;
        border-radius:10px;
        font-weight:600;
    }

    .logout{
        color:#6b7280;
        font-size:14px;
        padding-left:6px;
    }

    /* MAIN */
    .main {
      flex: 1;
      padding: 30px;
      overflow-y: auto;
    }

    .topbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .avatar {
      background: #6c63ff;
      color: #fff;
      padding: 8px 12px;
      border-radius: 50%;
    }

    /* CARD */
    .card {
      background: #fff;
      border-radius: 18px;
      padding: 25px;
      margin-top: 25px;
    }

    .stats {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 15px;
      margin-top: 15px;
    }

    .stat {
      padding: 20px;
      border-radius: 14px;
      cursor: default;
    }

    .blue { background: #eef2ff; color: #4f46e5; }
    .purple { background: #f4f0ff; color: #7c3aed; }
    .pink { background: #fff0f6; color: #db2777; }

    .qr {
      background: linear-gradient(135deg, #111827, #1f2937);
      color: #fff;
      border-radius: 16px;
      padding: 20px;
      cursor: default;
    }

    /* RECENT */
    .row {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    #addVisit {
      background: #5b4cf0;
      color: #fff;
      border: none;
      padding: 10px 16px;
      border-radius: 10px;
    }

    .record {
      display: flex;
      gap: 20px;
      margin-top: 20px;
    }

    .date {
      background: #eef2ff;
      color: #4f46e5;
      width: 50px;
      height: 50px;
      border-radius: 14px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
    }

    .tags span {
      background: #f1f5f9;
      padding: 6px 10px;
      border-radius: 999px;
      font-size: 12px;
      margin-right: 6px;
    }

    .rx {
      margin-left: auto;
      text-align: right;
    }

    /* MODAL */
    .overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.45);
      display: none;
      align-items: center;
      justify-content: center;
    }

    .modal {
      background: #fff;
      width: 420px;
      border-radius: 18px;
      padding: 25px;
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .form-row {
      display: flex;
      gap: 15px;
      margin: 15px 0;
    }

    label {
      font-size: 12px;
      color: #666;
    }

    input {
      width: 100%;
      padding: 12px;
      border-radius: 10px;
      border: 1px solid #e5e7eb;
      margin-top: 6px;
    }

    .save {
      width: 100%;
      margin-top: 20px;
      background: #5b4cf0;
      color: #fff;
      border: none;
      padding: 14px;
      border-radius: 12px;
      font-size: 16px;
    }

  </style>
</head>
<body>

<div class="app">
  <aside class="sidebar">
    <div class="logo"><img src="{{ url_for('static', filename='Image/logo.jpg') }}" height="50"> TapHealth</div>

    <nav>
  <a href="{{url_for('Dashboard')}}" class="active">Dashboard</a>
  <a href="{{url_for('documents')}}">Documents</a>
  <a href="{{url_for('Wellness')}}">Wellness</a>
  <a href="{{url_for('information')}}">Information</a>
  <a href="{{url_for('insurance')}}">Insurance</a>
  <a href="{{url_for('Map')}}">Map</a>
</nav>

<div class="bottom">
  <a href="{{url_for('emergency')}}" class="emergency">ðŸš¨ Emergency</a>
  <a href="{{url_for('index')}}" class="logout">â†© Log Out</a>
</div>
  </aside>

  <main class="main">
    <header class="topbar">
      <h3>Welcome back, <b>{{ user_name }}</b></h3>
      <div class="user">
        <span class="avatar">{{ user_name[0] }}</span>
      </div>
    </header>

    <section class="card">
      <h3>Health Overview</h3>

      <div class="stats">
        <div class="stat blue">
          <p>VISITS</p>
          <h2>2</h2>
        </div>

        <div class="stat purple">
          <p>MEDS</p>
          <h2>2</h2>
        </div>

        <div class="stat pink">
          <p>DOCS</p>
          <h2>2</h2>
        </div>
        <div class="qr" id="openQR">
          <h4>My Health QR</h4>
          <p>Scan to connect with doctor</p>
        </div>
      </div>
    </section>
    <section class="card">
      <div class="row">
        <h3>Recent History</h3>
        <a href="{{url_for('information')}}"><button id="addVisit">ï¼‹ Add Visit</button></a>
      </div>

      <div class="record">
        <div class="date">15</div>
        <div class="info">
          <h4>Viral Pharyngitis</h4>
          <p>Dr. Asha Deshmukh â€¢ General Practitioner</p>
          <div class="tags">
            <span>High fever</span>
            <span>Sore throat</span>
            <span>Fatigue</span>
          </div>
        </div>
        <div class="rx">
          <p><b>Paracetamol</b> 500mg</p>
          <p><b>Vitamin C</b> 1000mg</p>
        </div>
      </div>
    </section>
  </main>
</div>

<!-- MODAL (REUSED, NOT NEW) -->
<div class="overlay" id="modal">
  <div class="modal">
    <div class="modal-header">
      <h3>My Health QR</h3>
      <span id="close">âœ•</span>
    </div>

    <div id="qrcode" style="display:flex;justify-content:center;"></div>
  </div>
</div>

<!-- JS (MINIMAL, SAME FILE) -->
<script>
  const modal = document.getElementById("modal");
  const qrBox = document.getElementById("qrcode");
  const openQR = document.getElementById("openQR");
  const closeBtn = document.getElementById("close");

  openQR.onclick = () => {
    modal.style.display = "flex";
    qrBox.innerHTML = "";

    const userId = "{{ user_id }}";
    const qrData = `http://localhost:5000/scan/${userId}`;

    new QRCode(qrBox, {
      text: qrData,
      width: 150,
      height: 150
    });
  };

  closeBtn.onclick = () => {
    modal.style.display = "none";
    qrBox.innerHTML = "";
  };
</script>

</body>
</html>
